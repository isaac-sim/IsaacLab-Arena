GR1 manipulation workflow:

./docker/run_docker.sh
export DATASET_DIR=/datasets/isaaclab_arena/static_manipulation_tutorial
export MODELS_DIR=/models/isaaclab_arena/static_manipulation_tutorial



Env setup and validation:

python isaaclab_arena/scripts/replay_demos.py \
  --device cpu \
  --enable_cameras \
  --dataset_file "${DATASET_DIR}/arena_gr1_manipulation_dataset_generated.hdf5" \
  gr1_open_microwave \
  --embodiment gr1_pink



Trying out different envs:

python isaaclab_arena/scripts/record_demos.py \
  --device cpu \
  --dataset_file $DATASET_DIR/env_test.hdf5 \
  --num_demos 10 \
  --num_success_steps 2 \
  kitchen_pick_and_place \
  --teleop_device avp_handtracking \
  --object mustard_bottle \
  --embodiment gr1_pink

  python isaaclab_arena/scripts/record_demos.py \
  --device cpu \
  --dataset_file $DATASET_DIR/env_test.hdf5 \
  --num_demos 10 \
  --num_success_steps 2 \
  kitchen_pick_and_place \
  --teleop_device keyboard \
  --object cracker_box \
  --embodiment franka


python isaaclab_arena/scripts/replay_demos.py \
  --device cpu \
  --enable_cameras \
  --dataset_file "${DATASET_DIR}/env_test.hdf5" \
  kitchen_pick_and_place \
  --embodiment franka



Teleoperation data collection:

In a terminal outside of Isaac Lab - Arena container: 

cd submodules/IsaacLab

docker run -it --rm --name cloudxr-runtime \
  --user $(id -u):$(id -g) \
  --gpus=all \
  -e "ACCEPT_EULA=Y" \
  --mount type=bind,src=$(pwd)/openxr,dst=/openxr \
  -p 48010:48010 \
  -p 47998:47998/udp \
  -p 47999:47999/udp \
  -p 48000:48000/udp \
  -p 48005:48005/udp \
  -p 48008:48008/udp \
  -p 48012:48012/udp \
  nvcr.io/nvidia/cloudxr-runtime:5.0.0

python isaaclab_arena/scripts/record_demos.py \
  --device cpu \
  --dataset_file $DATASET_DIR/arena_gr1_manipulation_dataset_recorded_demo.hdf5 \
  --num_demos 10 \
  --num_success_steps 2 \
  gr1_open_microwave \
  --teleop_device avp_handtracking



Replay teleop data:

python isaaclab_arena/scripts/replay_demos.py \
  --device cpu \
  --enable_cameras \
  --dataset_file "${DATASET_DIR}/arena_gr1_manipulation_dataset_recorded_live.hdf5" \
  gr1_open_microwave \
  --embodiment gr1_pink



Data generation:

python isaaclab_arena/scripts/annotate_demos.py \
  --device cpu \
  --input_file $DATASET_DIR/arena_gr1_manipulation_dataset_recorded_live.hdf5 \
  --output_file $DATASET_DIR/arena_gr1_manipulation_dataset_annotated_live.hdf5 \
  --enable_pinocchio \
  --mimic \
  gr1_open_microwave

python isaaclab_arena/scripts/generate_dataset.py \
  --device cpu \
  --generation_num_trials 50 \
  --num_envs 10 \
  --input_file $DATASET_DIR/arena_gr1_manipulation_dataset_annotated_live.hdf5 \
  --output_file $DATASET_DIR/arena_gr1_manipulation_dataset_generated_live.hdf5 \
  --enable_pinocchio \
  --enable_cameras \
  --mimic \
  gr1_open_microwave

python isaaclab_arena/scripts/replay_demos.py \
  --device cpu \
  --enable_cameras \
  --dataset_file $DATASET_DIR/arena_gr1_manipulation_dataset_generated_live.hdf5 \
  gr1_open_microwave \
  --embodiment gr1_pink
  
  
  Data conversion

./docker/run_docker.sh -g -d /home/nvidia/datasests -m /home/nvidia/models

  
export DATASET_DIR=/datasets/isaaclab_arena/static_manipulation_tutorial
export MODELS_DIR=/models/isaaclab_arena/static_manipulation_tutorial

python isaaclab_arena_gr00t/data_utils/convert_hdf5_to_lerobot.py \
  --yaml_file isaaclab_arena_gr00t/config/gr1_manip_config.yaml
  
  
 cd submodules/Isaac-GR00T

python scripts/gr00t_finetune.py \
--dataset_path=$DATASET_DIR/arena_gr1_manipulation_dataset_generated/lerobot \
--output_dir=$MODELS_DIR \
--data_config=fourier_gr1_arms_only \
--batch_size=24 \
--max_steps=20000 \
--num_gpus=1 \
--save_steps=5000 \
--base_model_path=nvidia/GR00T-N1.5-3B \
--no_tune_llm \
--tune_visual \
--tune_projector \
--tune_diffusion_model \
--no-resume \
--dataloader_num_workers=16 \
--report_to=wandb \
--embodiment_tag=gr1 \
--lora_rank=128

hf download \
   nvidia/GN1x-Tuned-Arena-GR1-Manipulation \
   --local-dir $MODELS_DIR/checkpoint-20000
   
python isaaclab_arena/examples/policy_runner.py \
  --policy_type gr00t_closedloop \
  --policy_config_yaml_path isaaclab_arena_gr00t/gr1_manip_gr00t_closedloop_config.yaml \
  --num_steps 2000 \
  --enable_cameras \
  gr1_open_microwave \
  --embodiment gr1_joint
   
